<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Anime Sommelier Aiko</title>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: auto; padding: 2em; background: #f4f4f4; }
        input[type="text"], select, button { width: 100%; padding: 10px; margin-bottom: 1em; border-radius: 5px; border: 1px solid #ccc; box-sizing: border-box; }
        button { background: #333; color: white; cursor: pointer; }
        .option-group { margin-bottom: 1em; padding: 1em; border: 1px solid #ddd; border-radius: 5px; background: #fff; }
        .option-group p { margin-top: 0; }
        label { display: flex; align-items: center; margin-bottom: 0.8em; }
        input[type="checkbox"] { width: auto; margin: 0 10px 0 0; }
        /* Style for our new loading message */
        #loading-message { display: none; text-align: center; padding: 10px; background: #e9e9e9; border-radius: 5px; color: #333; }
    </style>
</head>
<body>
    <h1>Anime Sommelier Aiko</h1>
    <p>Tell me your taste, and I shall find the perfect vintage.</p>
    <form action="/recommend" method="post" id="recommendation-form">
        <div class="option-group">
            <p><strong>First, your core taste:</strong></p>
            <input type="text" name="love1" placeholder="Anime you love #1" required>
            <input type="text" name="love2" placeholder="Anime you love #2" required>
            <input type="text" name="love3" placeholder="Anime you love #3" required>
            <input type="text" name="hate" placeholder="Anime you hate" required>
        </div>
        <div class="option-group">
            <p><strong>Select a recency preference:</strong></p>
            <select name="recency" required>
                <option value="{{ recency.recent }}">{{ recency.recent }}</option>
                <option value="{{ recency.modern }}">{{ recency.modern }}</option>
                <option value="{{ recency.classic }}">{{ recency.classic }}</option>
                <option value="{{ recency.carte_blanche }}" selected>{{ recency.carte_blanche }}</option>
            </select>
        </div>
        <div class="option-group">
            <p><strong>What emotion are you chasing?</strong> (Optional)</p>
            <label><input type="checkbox" name="emotions" value="make me laugh"> Makes me laugh</label>
            <label><input type="checkbox" name="emotions" value="make me cry"> Makes me cry</label>
            <label><input type="checkbox" name="emotions" value="make me think"> Makes me think</label>
            <label><input type="checkbox" name="emotions" value="thrill me"> Thrills & Suspense</label>
            <label><input type="checkbox" name="emotions" value="feel cozy or wholesome"> Cozy & Wholesome</label>
        </div>
        <div class="option-group">
            <p><strong>Are there any emotions you want to avoid?</strong> (Optional)</p>
            <label><input type="checkbox" name="avoid_emotions" value="make me cry"> Avoid Tears</label>
            <label><input type="checkbox" name="avoid_emotions" value="thrill me"> Avoid Thrills & Suspense</label>
            <label><input type="checkbox" name="avoid_emotions" value="make me think"> Avoid Complexity</label>
        </div>
        <div class="option-group">
            <p><strong>Finally, how would you like your recommendation?</strong></p>
            <label><input type="checkbox" name="show_analysis" value="yes"> Include Aiko's analysis of my taste</label>
            <label><input type="checkbox" name="hide_profile" value="yes"> Hide Emotional Profile (Keep it a surprise)</label>
        </div>
        
        <!-- The button is now outside the div so we can replace it easily -->
        <button type="submit" id="submit-button">Find My Perfect Anime</button>
        <div id="loading-message">
            <p><strong>Aiko is thinking...</strong><br>Please wait a moment.</p>
        </div>
    </form>

    <script>
        // Select the form, the button, and the loading message elements
        const form = document.getElementById('recommendation-form');
        const submitButton = document.getElementById('submit-button');
        const loadingMessage = document.getElementById('loading-message');

        // Add an event listener for when the form is submitted
        form.addEventListener('submit', function() {
            // Hide the submit button
            submitButton.style.display = 'none';
            // Show the loading message
            loadingMessage.style.display = 'block';
        });
    </script>

</body>
</html>